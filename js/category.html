<script>
    (function($) {
    $(document).ready(function() {
        var iconFolderOpenClass  = 'fa-folder-open';
        var iconFolderCloseClass = 'fa-folder';
        var iconAllExpandClass = 'fa-angle-double-down';
        var iconAllPackClass = 'fa-angle-double-up';
        // Handle directory-tree expansion:
        // 左键单独展开目录
        $(document).on('click', '#categories a[data-role="directory"]', function (event) {
            event.preventDefault();

            var icon = $(this).children('.fa');
            console.log
            var expanded = icon.hasClass(iconFolderOpenClass);
            var subtree = $(this).siblings('ul');
            icon.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
            if (expanded) {
                if (typeof subtree != 'undefined') {
                    subtree.slideUp({ duration: 100 });
                }
                icon.addClass(iconFolderCloseClass);
            } else {
                if (typeof subtree != 'undefined') {
                    subtree.slideDown({ duration: 100 });
                }
                icon.addClass(iconFolderOpenClass);
            }
        });
        // 右键展开下属所有目录
        $('#categories a[data-role="directory"]').bind("contextmenu", function(event){
            event.preventDefault();
            
            var icon = $(this).children('.fa');
            var expanded = icon.hasClass(iconFolderOpenClass);
            var listNode = $(this).siblings('ul');
            var subtrees = $.merge(listNode.find('li ul'), listNode);
            var icons = $.merge(listNode.find('.fa'), icon);
            icons.removeClass(iconFolderOpenClass).removeClass(iconFolderCloseClass);
            if(expanded) {
                subtrees.slideUp({ duration: 100 });
                icons.addClass(iconFolderCloseClass);
            } else {
                subtrees.slideDown({ duration: 100 });
                icons.addClass(iconFolderOpenClass);
            }
        })
        // 展开关闭所有目录按钮
        $(document).on('click', '#allExpand', function (event) {
            event.preventDefault();
            
            var icon = $(this).children('.fa');
            var expanded = icon.hasClass(iconAllExpandClass);
            icon.removeClass(iconAllExpandClass).removeClass(iconAllPackClass);
            if(expanded) {
                $('#sidebar .fa.fa-folder').removeClass('fa-folder').addClass('fa-folder-open')
                $('#categories li ul').slideDown({ duration: 100 });
                icon.addClass(iconAllPackClass);
            } else {
                $('#sidebar .fa.fa-folder-open').removeClass('fa-folder-open').addClass('fa-folder')
                $('#categories li ul').slideUp({ duration: 100 });
                icon.addClass(iconAllExpandClass);
            }
        });  
    });
})
</script>